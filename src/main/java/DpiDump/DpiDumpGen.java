package DpiDump;
import java.util.LinkedList;
import java.util.List;

import Common.CsvDumper;
import Common.CsvLoader;
import Common.RandUtils;
import Common.RandomCollection;

/*
 * This Java source file was generated by the Gradle 'init' task.
 */
public class DpiDumpGen {
		
	public int gen(String appFilePath, String appProtoFilePath, String ipProtoFilePath) {
		RandomCollection<String> mapApp = CsvLoader.load(appFilePath);
		RandomCollection<String> mapAppProto = CsvLoader.load(appProtoFilePath);
		//RandomCollection<String> mapIpProto = CsvLoader.load(ipProtoFilePath);
		
		List<Record> list = new LinkedList<Record>();
		for (int i = 0 ; i < 10000; i++) {
			Record rec = new Record();
			
			rec.setImsiImei(RandUtils.nextIntString(15));
			
			rec.setAppName(mapApp.next());
			rec.setAppProto(mapAppProto.next());
			
			rec.setDestinationIpAddress(RandUtils.nextIpv4());
			rec.setDestinationPort(RandUtils.nextInt(0,65535));
			
			rec.setDownlinkBytes(RandUtils.nextNormal());
			rec.setDownlinkPkt(RandUtils.nextNormal());
			rec.setUplinkBytes(RandUtils.nextNormal());
			rec.setUplinkPkt(RandUtils.nextNormal());
			
			rec.setIsTetheringDetected(RandUtils.nextBoolean()?"true":"false");
			
			rec.setUrl(RandUtils.nextUrl());
			
			//System.out.println(str);
			list.add(rec);
		}
		
		try {
			CsvDumper dumper = new CsvDumper();
			dumper.dump(list, "./dpi-dump.csv");
		} catch (Exception e) {
			e.printStackTrace();
		}
        return 0;
    }
}
